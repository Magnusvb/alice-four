---
action: 'shop:order'
template: main
published: true
name: Order
url: '/order/:orderId'
---
<div class="customer-page">
  <h1>{{ page.title }}</h1>
  {% if order %}

  <section class="summarize">
    <p><strong>Order number: </strong> #{{ order.number }} </p>
    {% if order.invoices[0].payments().last().guessPaymentMethod() %}
    <p><strong>Payment method: </strong> {{ order.invoices[0].payments().last().guessPaymentMethod().name }}</p>
    {% endif %}
    <p><strong>Order Date: </strong> {{ order.created_at.format('M jS, Y') }}</p>
    {% if order.total_discount %}
    <p>Discount applied: <strong>{{ order.total_discount|currency }}</strong></p>
    {% endif %}
    <p>Subtotal: <strong>{{ order.subtotal_invoiced|currency }}</strong></p>
    <p>Sales Tax: <strong>{{ order.total_sales_tax|currency }}</strong></p>
    <p>Shipping: <strong>{{ order.total_shipping_quote|currency }}</strong></p>
    {% if order.total_shipping_tax %}
      <p>Shipping Taxes: <strong>{{ order.total_shipping_tax|currency }}</strong></p>
    {% endif %}
    <p>Total: <strong>{{ order.total|currency }}</strong></p>
    {% if order.payment_method.has_payment_form() and not order.payment_processed() %}
      <h3><a href="{{ root_url('/review/'~order.order_hash) }}">Pay the order</a></h3>
    {% endif %}
  </section>
  <section class="order-content">
    {% for invoice in order.invoices %}
      {% for shipment in invoice.shipments %}
        {% for item in shipment.shipmentItems %}
          <div class="order-content-item image">
            <a href="/product/{{ item.product.url_name }}"><img src="{{ item.product.images.first.thumbnail(100, 100)|default('http://placehold.it/100x100') }}"/></a>
            <a href="/product/{{ item.product.url_name }}">{{ item.product.name }}</a>
            {% set description = item.optionsString() %}
            {% if description %}
              <p>{{ description|unescape }}</p>
            {% endif %}
          </div>
          <div class="order-content-item quantity">
            <p>Quantity: {{ item.quantity|number_format(0) }}</p>
          </div>
          <div class="order-content-item price">
            <p>Price: {{ item.pivot.price|currency }}</p>
          </div>
          <div class="order-content-item discount">
            <p>Discount: {{ 0|currency }}</p>
          </div>
          <div class="order-content-item total">
            <p>Total: {{ (item.quantity *item.pivot.price)|currency }}</p>
          </div>
        {% endfor %}
      {% endfor %}
    {% endfor %}
  </section>

  {% else %}
    <p class="flash error">Order not found</p>
  {% endif %}
</div>
